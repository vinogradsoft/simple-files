# Варианты создания файлов и директорий

## Состояния

Файлы и директории могут быть в двух различных состояниях. В первом состоянии объект не существует в реальной файловой
системе, во втором - объект имеет связь с файловой системой и, следовательно, существует. Создание объектов возможно в
обоих состояниях, и процесс создания файлов и директорий идентичен.

Пример:

```php
// File
$file = new File('myFileName.txt');
// Directory
$directory = new Directory('myDirectoryName');
```

Чтобы создать новый файл или папку, которые еще не присутствуют в файловой системе, вам нужно использовать
оператор `new`. При этом важно понимать, что вам нужно указать только имя файла или папки, а не путь к уже существующему
файлу. Если вы все-таки попытаетесь указать путь, вы получите исключение `LogicException`. Аналогичное исключение будет
вызвано и в случае передачи пустой строки. Чтобы все работало правильно, вам необходимо указать только имя.

Второе состояние требует создания через статический метод `createBinded(string $path)`, в аргументе которого передается
путь к файлу в виде строки.

```php
// File
$file = File::createBinded('/var/www/myFileName.txt');
// Directory
$directory = Directory::createBinded('/var/www');
```

По умолчанию файлы и директории использует класс `\Vinograd\SimpleFiles\DefaultFilesystem` для работы с физической
файловой системой, и эта файловая система является локальной. Если файла или директории по переданному пути не
существует, будет выброшено исключение `\Vinograd\IO\Exception\NotFoundException`. Можно передавать методу создания как
абсолютные пути, так и относительные. Правило простое - `DefaultFilesystem` внутри себя использует php
функцию `realpath(...)`. Все возвраты со значением `false` этой функцией, вызовут исключение (см. документацию
`realpath(...)` в каких случаях эта функция может вернуть `false`). Проверить связан ли объект с файловой системой можно
с помощью метода `public function isBinded(): bool`.

## Связь с файловой системой

Связать новый объект файловой системы можно с помощью метода `bindWithFilesystem(string $path)`, который принимает
строку пути в качестве аргумента. Связывание нового объекта файловой системы может потребоваться, если вы хотите
выполнить связывание по какому-либо условию. Процессы связывания директории и файла отличаются.

### Связывание директорий

```php
$directory = new Directory('root');
$directory->bindWithFilesystem('/var/www');
```

В примере выше, директория будет создана в случае ее отсутствия, в каталоге `/var/www` и будет иметь путь
источника `/var/www/root`. Если директория уже существует, произойдет то же самое, но без создания
директории.

### Связывание файлов

```php
$file = new File('file.txt');
$file->bindWithFilesystem('/var/www');
```

Файл будет создан в каталоге `/var/www` при условии, что по указанному пути `/var/www/file.txt` он еще не существует.
Если файл уже существует в указанной директории, система просто свяжет его, не перезаписывая. Важно отметить, что при
связывании объекта файловой системы запись данных не происходит. Это делается для того, чтобы впоследствии можно было
прочитать данные из указанного источника.

Прежде всего, путь, с которым связывается объект, должен существовать. В данном случае, это директория `/var/www`. Также
стоит отметить, что имя файла или директории не указывается в конце пути при связывании.

Вот примеры НЕПРАВИЛЬНОГО использования:

- для директорий - `$directory->bindWithFilesystem('/var/www/root')`
- для файлов - `$file->bindWithFilesystem('/var/www/file.txt')`

Стоит заметить, что связывание новых объектов файловой системы не является обязательной операцией. Можно, например,
копировать и перемещать файлы и директории, которые не связаны с файловой системой.

[К оглавлению](../../README.md#руководство)